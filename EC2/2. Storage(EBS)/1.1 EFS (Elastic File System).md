## ğŸ“ What Is a File System?

A **file system** organizes and stores data in files and directories. In cloud computing, file systems allow multiple compute instances (like EC2) to access shared data simultaneously. AWS offers managed file systems that eliminate the need to manage hardware or software manually.
## ğŸŒ Amazon EFS (Elastic File System)

Amazon EFS is a **fully managed, serverless, elastic file system** designed for Linux-based workloads.
![[EFS.png]]
### ğŸ”§ Key Features
- **Scalable**: Automatically grows and shrinks as files are added or removed2
- **Concurrent Access**: Thousands of EC2 instances can access the same file system simultaneously
- **Protocol Support**: Uses NFSv4.1 and NFSv4.0, ideal for Linux environments
- **High Availability**: Data is stored across multiple Availability Zones (AZs)
- **Performance Modes**:
    - _General Purpose_: For latency-sensitive apps
    - _Max I/O_: For highly parallel workloads
- **Throughput Modes**:
    - _Bursting_: Scales with usage or scales automatically.
    - _Provisioned_: Set throughput manually
### ğŸ“Œ Use Cases

- Web hosting (shared content across servers)
- Machine learning (shared training data)
- Content management systems
- Home directories for users

### ğŸ’¡ Example

Imagine a web app hosted on multiple EC2 instances. You store user-uploaded images in EFS so all servers can access them instantly and consistently

## Why EFS Exists (Problem it Solves)
Imagine you have **3 EC2 servers** running your web apps
- Each server saves logs, images, or user-uploaded files.
- If storage is local (EBS), then **server-1 ke file, server-2 ko nahi milegi**.
- That creates a problem in real-world projects where **all servers must share the same data** (e.g., WordPress uploads, user files, logs).
ğŸ‘‰ Solution: **EFS**
- One common storage, all servers mount it, and everyone sees the same files.
- If EC2-1 uploads a file, EC2-2 can instantly read it.
## How EFS Works (Internals)

- EFS is a **fully managed [^1][NFS (Network File System)](obsidian://open?vault=Obsidian%20Vault&file=EC2%2F2.%20Storage(EBS)%2F1.2%20NFS%20Protocol) storage.
- You create an EFS file system inside AWS â†’ it creates **mount targets** (endpoints) in your VPC.
- EC2 instances (in same VPC or connected via peering/VPN) mount the EFS using NFS protocol.
- Multiple EC2s can **read + write** at the same time.
- AWS manages replication (your data is stored across multiple AZs automatically).
## 4. EFS vs EBS vs S3 (Common Doubt ğŸ¤¯)

- **EBS (Elastic Block Store)** = Disk attached to _one_ EC2 (like C:/ or D:/ drive).
- **S3 (Simple Storage Service)** = Object storage (you store _objects_, not files you directly edit like in Linux). Access via API/URL.
- **EFS (Elastic File System)** = Shared file storage, POSIX-compliant, can be mounted like a folder in Linux.

ğŸ‘‰ Rule of thumb:
- Need storage for **one instance only** â†’ EBS
- Need storage for **sharing files across many servers** â†’ EFS
- Need storage for **massive object data (images, backups, big data)** â†’ S3
## 6. Real-World Example

Suppose youâ€™re building an **e-commerce website** on AWS:
- You run the site on an **Auto Scaling Group** of EC2 servers.
- A customer uploads a profile picture â†’ that file must be available to all EC2s (not just the one handling the upload).
- You mount **EFS** on `/var/www/uploads` in all EC2 servers.
- Now no matter which server handles the request, everyone sees the same uploaded files.
## 7. Common Doubts Cleared

â“ Can EFS be used by Windows instances?  
ğŸ‘‰ No. EFS is for **Linux only** (uses NFS). For Windows, AWS has **FSx for Windows File Server**.

â“ Is EFS cheap?  
ğŸ‘‰ No ğŸ˜‚ EFS is more expensive than S3/EBS. Itâ€™s for **specific use cases** (shared file system). For cost optimization, sometimes people move old data from EFS â†’ S3.

â“ Can I use EFS across multiple regions?  
ğŸ‘‰ No, EFS is **regional**. But it spans multiple AZs **inside the same region**.
[^1]: [^1]: ## 1. What is NFS?
		
		**NFS = Network File System**
		
		- Itâ€™s a **protocol** (set of rules) that allows you to **share files over a network**.
		- Created by Sun Microsystems (old but gold).
		- Works mostly in **Linux/Unix systems**.
		ğŸ‘‰ In simple words:  
		Normally, a file system is local (like your C:/ drive or /home folder in Linux).  
		With **NFS**, your files sit on one server, but you can **mount it on another server** so it looks like local storage.
		---
		## 2. How NFS Works
		
		Imagine:
		- One **storage server** (keeps the files).
		- Other **client servers** (want to use those files).
		
		Steps:
		1. Storage server runs **NFS service**.
		2. Client requests: â€œMount this remote directory into my local system.â€
		3. After mount, client sees remote files as if theyâ€™re in a **local folder**.
		Example:
		- Storage server has `/data` folder.
		- Client mounts it on `/mnt/shared`.
		- Client runs `ls /mnt/shared` â†’ sees files stored on storage server.
		---
		
		## 3. Why NFS is Used in AWS EFS
		
		EFS is basically **a managed NFS service**.
		- AWS handles the backend servers for you.
		- You just mount it on EC2 using NFS protocol.
		- Benefit: All EC2s mount the same EFS, so they share the same directory.
		
		So:
		
		- Without NFS â†’ every server has its own isolated storage.
		- With NFS (EFS) â†’ all servers share one big folder.
		---
		
		## 4. Real-Life Example
	
		Think of a **college computer lab**:
		- Server in the back has all project files.
		- Each student logs in from their PC â†’ mounts that shared folder â†’ sees the same files.
		- If one student uploads a file, everyone else can see it instantly.
		
		Thatâ€™s exactly what NFS (and EFS) does in AWS.
		
		---
		
		## 5. Difference from Other Protocols
		
		- **SMB / CIFS** â†’ File sharing for Windows (used in FSx for Windows).
		- **NFS** â†’ File sharing for Linux/Unix (used in EFS).
		- **S3 protocol (HTTP/REST)** â†’ Object-based, not traditional file system.
		---
		
		## 6. Command Example (Linux EC2)
		
		If you had a plain Linux NFS server, mounting looks like this
		`sudo yum install -y nfs-utils sudo mkdir /mnt/efs sudo mount -t nfs4 192.168.1.10:/data /mnt/efs`
		
		- `192.168.1.10:/data` = remote NFS path (on storage server).
		    
		- `/mnt/efs` = where you see it locally.
		    
		On AWS, you just replace that IP with the **EFS mount target DNS**.
		
		---
		
		ğŸ‘‰ So in short:
		
		- **NFS** = technology/protocol that allows remote shared folders.
		- **EFS** = AWS-managed service built on NFS, so you donâ€™t worry about servers or configs.


























## ğŸ” EFS vs FSx: Quick Comparison

|Feature|Amazon EFS|Amazon FSx|
|---|---|---|
|OS Compatibility|Linux|Windows, Linux, macOS|
|Protocols|NFS|SMB, NFS, Lustre, iSCSI|
|Performance|Elastic throughput|Sub-ms latency, high IOPS|
|Use Case|Web hosting, ML, shared storage|HPC, enterprise apps, media editing|
|Management|Fully managed, serverless|Fully managed, customizable|



