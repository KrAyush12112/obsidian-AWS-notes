# ðŸ“˜ Example: Simple Dockerfile for Apache2 on Ubuntu

dockerfile

```
# 1. Start with a base image
FROM ubuntu:20.04

# Fix
# Prevent interactive prompts during build
ENV DEBIAN_FRONTEND=noninteractive

# 2. Install Apache2 during build
RUN apt update && apt install -y apache2

# 3. Copy your custom index.html into the container
COPY ./index.html /var/www/html/

# 4. Expose port 80 so it can be accessed outside
EXPOSE 80

# 5. Define the default command to run Apache in foreground
CMD ["apache2ctl", "-D", "FOREGROUND"]
```

### ðŸ”¹ Explanation of Each Line

- **FROM ubuntu:20.04** â†’ Base image (lightweight Ubuntu OS).
    
- **RUN apt update && apt install -y apache2** â†’ Buildâ€‘time command to install Apache2.
    
- **COPY ./index.html /var/www/html/** â†’ Copies your site file from host into container.
    
- **EXPOSE 80** â†’ Declares that container will listen on port 80.
    
- **CMD ["apache2ctl", "-D", "FOREGROUND"]** â†’ Runtime command to start Apache server.
    
### ðŸ”¹ How to Use This Dockerfile

1. Save the file as `Dockerfile` in a folder with your `index.html`.
    
2. Build the image:
    
    ```
    docker build -t my-apache .
    ```
    
3. Run the container:
    
    ```
    docker run -dit -p 8080:80 --name webserver my-apache
    ```
    
4. Access in browser:
    
    Code
    
    ```
    http://localhost:8080
    ```
    
    or EC2 public IP:
    
    Code
    
    ```
    http://<your-ec2-public-ip>:8080
    ```
    

âœ… **Summary:** A Dockerfile is a declarative way to **build an image**. You describe the base (`FROM`), what to install (`RUN`), what files to copy (`COPY`), which ports to expose (`EXPOSE`), and the default command (`CMD`).


> [!NOTE] Problem faced during building Dockerfile
> during your Docker image build, when Apache2 is installing inside the container, itâ€™s triggering a **timezone configuration prompt**
> 
> Lekin problem yeh hai ki Docker build process **automatic (non-interactive)** hoti hai. Wahan koi insaan type karne ke liye nahi baitha hota, isliye woh wahin atak gaya hai (freeze ho gaya).
> Jo phele Dockerfile ke promt hai usme eak ye he bug hai.

> # The fix
> add this command just before installing apache2
>#### Prevent interactive prompts during build
   ENV DEBIAN_FRONTEND=noninteractive
   

# What i learned
phele mai manually ubnuntu image install karta tha usko run karta tha aur eak container banta tha. uss container pe mai apache intall karke web site host arta tha. 
docker file banane se mujhe yeh sab nahi karna padega mai docker file me saare command likh diya aur khud ke custom name ke image bana de apne hissab se usme chiz dalde

# ðŸ”¹ Manual Way (Imperative)

- You **pull Ubuntu image** â†’ `docker run -it ubuntu bash`
    
- Inside container, you **manually install Apache** â†’ `apt update && apt install apache2`
    
- Then you configure files (`index.html`, etc.)
    
- Every time you want a new container, you repeat these steps manually.

ðŸ‘‰ Downside: Timeâ€‘consuming, errorâ€‘prone, not repeatable.

# ðŸ”¹ Dockerfile Way (Declarative)

- You **write all steps once** in a `Dockerfile`:
    
    ```
    FROM ubuntu:20.04
    RUN apt update && apt install -y apache2
    COPY ./index.html /var/www/html/
    EXPOSE 80
    CMD ["apache2ctl", "-D", "FOREGROUND"]
    ```
    
- Then you build:
    bash
    ```
    docker build -t my-web .
    ```
    
- Now you have a **custom image** (`my-web`) with Apache + your site already inside.
    
- To run:
    bash
    ```
    docker run -dit -p 8080:80 my-web
    ```
- Instantly, Apache starts and serves your site â€” no manual install needed.

ðŸ‘‰ Benefit: Reusable, portable, versionâ€‘controlled, and consistent.
![[Dockerfile.png]]

